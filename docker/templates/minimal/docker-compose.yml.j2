services:
  claude:
    build: .
    container_name: claude_{{ workspace_name }}
    ports:
      - "{{ claude_port }}:8000"
    volumes:
      - ./workspace:/workspace
      - ${HOME}/.gitconfig:/home/claude/.gitconfig
      - ${HOME}/.git-credentials:/home/claude/.git-credentials
      - ${HOME}/.claude:/home/claude/.claude
    environment:
      - CLAUDE_HOST_PORT={{ claude_port }}
      - CLAUDE_INTERNAL_PORT=8000
    restart: unless-stopped
    tty: true
    stdin_open: true